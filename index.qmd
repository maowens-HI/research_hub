---
title: "Research Hub"
pagetitle: "Research Hub | Advancing Sound Economic Policy"
format:
  html:
    toc: false
    title-block-banner: false
    page-layout: full
---

::: {.hero}
::: {.hero-content}

# Research Notes & Analysis {.hero-headline}

[]{.hero-tagline}

[View Recent Work](#latest-research){.cta-primary}

:::
:::

::: {.section}
::: {.container}

::: {.section-header}
## This Month {#latest-research}
Recent analyses and code reviews documenting progress on the project.
:::

::: {.carousel-container}
::: {.carousel-wrapper}

::: {.carousel-slide}
::: {.research-card}
[Notes]{.card-category}

[December Meeting - Analysis Review]{.card-title}

[Comprehensive review of Figure 2 fixes and jackknife strategy. Presented completed results and discussed next steps for robustness analysis.]{.card-excerpt}

[December 2025]{.card-meta}

[View Meeting Notes](meeting-dec-05-2025.qmd){.card-link}
:::
:::

::: {.carousel-slide}
::: {.research-card}
[Analysis]{.card-category}

[Dec 02: Figure 2 Fixes & Jackknife Strategy]{.card-title}

[Resolving the "Never Treated" interaction issue. Bug fix: Define high=0 among NTs and remove interaction with year effects. Implementing jackknife iterations for robustness.]{.card-excerpt}

[December 2025]{.card-meta}

[View Jackknife Code Review](https://maowens.quarto.pub/jk_code_review/){.card-link}
:::
:::

:::

::: {.carousel-controls}
<button class="carousel-btn carousel-prev" aria-label="Previous">‹</button>
::: {.carousel-dots}
:::
<button class="carousel-btn carousel-next" aria-label="Next">›</button>
:::

:::

:::
:::

::: {.section}
::: {.container}

::: {.section-header}
## Quick Access
Links to useful things.
:::

::: {.card-grid}

::: {.card}
### Weekly Meetings

Meeting notes and agenda for PI check-ins and project updates.

[Open Google Doc](https://docs.google.com/document/d/12HWKK_0nlRcxNbcCX9QPQGAwK9ejVl5VxKu-PMaEjyg/edit?tab=t.0){.card-link}
:::

::: {.card}
### Shared Data & Code

Access shared datasets, code repositories, and analysis files.

[Open Google Drive](https://drive.google.com/drive/folders/1ww0lXRawQ7TCRBm0FGwCJii-3QA9pc6t?usp=sharing){.card-link}
:::

::: {.card}
### Website Repository

View source code and contribute to this website on GitHub.

[Open GitHub Repo](https://github.com/maowens-HI/school_finance){.card-link}
:::

:::

:::
:::

::: {.section .section-alt}
::: {.container}

## Research Timeline

A chronological record of project milestones and findings.

---

### December 2025 {.mt-xl}

#### Dec 05: December Meeting - Analysis Review

**Topic:** Comprehensive review of Figure 2 fixes and jackknife strategy.

[View Full Meeting Notes](meeting-dec-05-2025.qmd){.btn-ghost}

---

#### Dec 02: Figure 2 Fixes & Jackknife Strategy

**Topic:** Resolving the "Never Treated" interaction issue.

::: {.callout-warning appearance="minimal"}
**Bug Found:** "High" variable was defined as missing for never-treated units, dropping them from interaction regressions.

**Fix:** Define `high=0` among NTs and remove interaction with year effects (let NTs dictate year effects).
:::

**Next Steps (Jackknife Iterations):**

1. Baseline spending only (No Jackknife)
2. Baseline + Income Quartiles (No Jackknife)
3. Baseline + Income + Reform Types (No Jackknife)
4. *Repeat 1-3 with Jackknife.*

::: {.tag-group}
[View Jackknife Code Review](https://maowens.quarto.pub/jk_code_review/){.btn-ghost}
:::

---

### November 2025 {.mt-xl}

#### Nov 25: Robustness & JJP Comparison

**Topic:** Jackknife vs Non-Jackknife and Sample Selection Bias.

- **Decision:** Run Fig 1 among bottom 10% baseline spending counties.
- **Context (JJP Comparison):** JJP's Figure 1 (large effect) uses PSID-linked districts (~10% of districts, selected for low income). JJP Appendix B2 (all districts) shows smaller effects closer to our findings.

[View Analysis](https://maowens.quarto.pub/jackknife/){.btn-ghost}

---

#### Nov 17-21: District & Panel Analysis

**Topic:** District level expansion and balancing checks.

- **Balance Exercise:** Sample balanced on non-missing `lexp_ma_strict` from event times -5 to 17.
- **Hypothesis:** Aggregating to county level smooths variation across districts, potentially leading to smaller effects than JJP.

::: {.tag-group}
[District Level Results](https://maowens.quarto.pub/district_and_top_100/){.tag}
[Balanced Panel Results](https://maowens.quarto.pub/balanced-panel-event-study-analysis/){.tag}
:::

---

#### Nov 06: Sample Variations (Fig 1 & 2)

**Topic:** Robustness checks across weighted/unweighted and sample restrictions.

::: {.panel-tabset}

##### Summary Table

| Figure | Sample Definition | Weighted | Link |
|:---|:---|:---:|:---|
| **Fig 1** | Includes counties w/ >2 non-tract areas | **Yes** | [View](https://maowens.quarto.pub/11_7_25_wt/) |
| **Fig 1** | Includes counties w/ >2 non-tract areas | No | [View](https://maowens.quarto.pub/11_7_25_no_wt/) |
| **Fig 1** | Excludes counties w/ >2 non-tract areas | **Yes** | [View](https://maowens.quarto.pub/11_7_25_wt_rest_tract/) |
| **Fig 1** | Excludes counties w/ >2 non-tract areas | No | [View](https://maowens.quarto.pub/11_7_25_no_wt_rest_tract/) |

##### All Counties Sample

*Includes all counties regardless of non-tract area count.*

- **Figure 1s (Weighted):** [View Results](https://maowens.quarto.pub/11_4_25_wt/)
- **Figure 1s (Unweighted):** [View Results](https://maowens.quarto.pub/11_4_25_no_wt/)
- **Figure 2s (Weighted):** [View Results](https://maowens.quarto.pub/11_6_25_wt/)

##### Restricted Sample

*Excludes problematic counties (≥2 non-tract areas).*

- **Figure 1s (Weighted):** [View Results](https://maowens.quarto.pub/11_3_25_wt/)
- **Figure 1s (Unweighted):** [View Results](https://maowens.quarto.pub/11_3_25_no_wt/)

:::

---

### October 2025 {.mt-xl}

#### Oct 31: The "Mixed" County Problem

**Topic:** Handling counties with multiple non-tracted areas.

::: {.callout-note appearance="minimal"}
**The Issue:** We lack school-age population data for non-tracted areas. If a county has >1 non-tracted area, we cannot weight them relative to each other.

**The Fix:** Combine all non-tracted areas in a county into a single "pseudo-area." Average their PPE (unweighted), then weight this pseudo-area against the tracts using the residual county population.
:::

---

#### Oct 28: Defining "Good" Counties

**Topic:** Creating a clean baseline dataset.

- **Definition:** A "Good County" is one where every linked tract/LEAID has non-missing spending data for **every year from 1966-1971**.
- **Action:** Created indicator variables `good_county_6671` to filter samples.

---

#### Oct 24: Baseline Year Selection

- **Findings:** 1971 vs. 1966-70 average yields similar results.
- **Decision:** Use 1971 on its own or average across several years (robustness check).

[View Full Notes](https://maowens.quarto.pub/10_24_25-b397/){.btn-ghost}

---

#### Oct 21: Pre-Quartile Splits

- **Goal:** Compare individual pre-quartile splits (e.g., 1967 vs 1971) to ensure single-year spikes aren't driving results.

[View Full Notes](https://maowens.quarto.pub/10_21_25-da7b/){.btn-ghost}

---

#### Oct 17: Interpolation & Winsorizing

- **Method:** Winsorize all spending values at 1st and 99th percentiles (within year).
- **Refinement:** Interpolate at the *district* level before tract-to-county processing (previously done at tract level).

[View Full Notes](https://maowens.quarto.pub/10_17_25/){.btn-ghost}

---

#### Oct 11: Common Core & Balancing

- **Data Update:** Incorporated Common Core spending data through 2018-19.
- **Balancing:** Redefined `lead_5` to bin all earlier years; `lag_17` bins all later years. Exclude counties treated 2000+.

[View Full Notes](https://maowens.quarto.pub/10_10_25/){.btn-ghost}

---

#### Oct 07: Debugging `pred_spend`

- **Challenge:** Event studies by `pred_spend` went in opposite directions than expected.
- **Action:** Step-by-step reconstruction (Simple event study → Baseline Quartile split → `pred_spend` construction).

[View Full Notes](https://maowens.quarto.pub/10_7_25/){.btn-ghost}

---

### September 2025 {.mt-xl}

#### Sep 30: Reform Variables

- **Decision:** Build `pred_spend` *without* reforms to isolate variable issues.

[View Full Notes](https://maowens.quarto.pub/9_30_25/){.btn-ghost}

---

#### Sep 23: Wisconsin Binning Fix

- **Bug:** Coefficients for lead 16-19 were empty, but lead 20 was non-empty.
- **Cause:** Binning issue in estimation. Fixed.

[View Full Notes](https://maowens.quarto.pub/9_23_25/){.btn-ghost}

---

#### Sep 02: Hanushek vs. JJP

- **Action:** Re-run First Stage Approach 1 using *only* JJP reform info (ignore Hanushek table for now) to ensure replication.

[View Full Notes](https://maowens.quarto.pub/jjp_first_stage/){.btn-ghost}

---

### August 2025 {.mt-xl}

#### Aug 26: Data Cleaning

- **Imputation:** Imputed 1986 enrollment using 1987 numbers for district 3416800.
- **Zero Values:** For 1983 `enrollment==0`, replaced with '84 (or '82) values.

---

#### Aug 19: JJP Methodology Deep Dive

**Topic:** Weighting and Rolling Windows.

- **Difference:** JJP uses district-level; we use county-level.
- **Variable Definitions:**
  1. Current year spending (weighted by 1972 pop).
  2. Log average PPE over 13-year rolling window (missing if <13 years data).
  3. Log average PPE over available data (filling missing years with 1967 value).

---

#### Aug 01: The PPE Formula

**Topic:** Calculating Per Pupil Expenditures (PPE) for split tracts.

::: {.callout-note appearance="minimal"}
**Logic for Primary/Secondary Tracts:**

1. Get Primary PPE and Secondary PPE.
2. Get share of students in tract who are Primary-age vs Secondary-age.
3. **Formula:** `(PrimaryPPE * PrimaryShare) + (SecondaryPPE * SecondaryShare)`
:::

---

### July 2025 {.mt-xl}

#### July 29: Duplicate Tracts

- **Issue:** Tracts appearing multiple times (once for elementary, once for secondary).
- **Resolution:** Reshape to tract level with separate variables for elementary/secondary districts.

---

#### July 15: Geographic Challenges

- **Issue:** Difficulty mapping districts to counties via tracts.
- **Strategy:** If population weighting fails, default to centroids. Match failures (un-tracted areas) assigned to counties via GRF.

---

#### July 11: Project Kickoff

- **Goal:** Produce panel of per-pupil spending at the county level.
- **Rationale:** We only observe birth location at the county level.

:::
:::

<script>
document.addEventListener('DOMContentLoaded', function() {
  const wrapper = document.querySelector('.carousel-wrapper');
  const slides = document.querySelectorAll('.carousel-slide');
  const prevBtn = document.querySelector('.carousel-prev');
  const nextBtn = document.querySelector('.carousel-next');
  const dotsContainer = document.querySelector('.carousel-dots');

  if (!wrapper || !slides.length) return;

  let currentIndex = 0;
  let slidesPerView = getSlidesPerView();
  const totalSlides = slides.length;
  const maxIndex = Math.max(0, totalSlides - slidesPerView);

  // Create dots
  for (let i = 0; i <= maxIndex; i++) {
    const dot = document.createElement('button');
    dot.classList.add('carousel-dot');
    dot.setAttribute('aria-label', `Go to slide ${i + 1}`);
    if (i === 0) dot.classList.add('active');
    dot.addEventListener('click', () => goToSlide(i));
    dotsContainer.appendChild(dot);
  }

  const dots = document.querySelectorAll('.carousel-dot');

  function getSlidesPerView() {
    if (window.innerWidth >= 992) return 3;
    if (window.innerWidth >= 768) return 2;
    return 1;
  }

  function updateCarousel() {
    const slideWidth = 100 / slidesPerView;
    wrapper.style.transform = `translateX(-${currentIndex * slideWidth}%)`;

    // Update dots
    dots.forEach((dot, index) => {
      dot.classList.toggle('active', index === currentIndex);
    });

    // Update button states
    prevBtn.disabled = currentIndex === 0;
    nextBtn.disabled = currentIndex >= maxIndex;
  }

  function goToSlide(index) {
    currentIndex = Math.max(0, Math.min(index, maxIndex));
    updateCarousel();
  }

  function nextSlide() {
    if (currentIndex < maxIndex) {
      currentIndex++;
      updateCarousel();
    }
  }

  function prevSlide() {
    if (currentIndex > 0) {
      currentIndex--;
      updateCarousel();
    }
  }

  prevBtn.addEventListener('click', prevSlide);
  nextBtn.addEventListener('click', nextSlide);

  // Handle window resize
  let resizeTimer;
  window.addEventListener('resize', function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(function() {
      const newSlidesPerView = getSlidesPerView();
      if (newSlidesPerView !== slidesPerView) {
        slidesPerView = newSlidesPerView;
        const newMaxIndex = Math.max(0, totalSlides - slidesPerView);

        // Rebuild dots
        dotsContainer.innerHTML = '';
        for (let i = 0; i <= newMaxIndex; i++) {
          const dot = document.createElement('button');
          dot.classList.add('carousel-dot');
          dot.setAttribute('aria-label', `Go to slide ${i + 1}`);
          dot.addEventListener('click', () => goToSlide(i));
          dotsContainer.appendChild(dot);
        }

        currentIndex = Math.min(currentIndex, newMaxIndex);
        updateCarousel();
      }
    }, 250);
  });

  // Keyboard navigation
  document.addEventListener('keydown', function(e) {
    if (e.key === 'ArrowLeft') prevSlide();
    if (e.key === 'ArrowRight') nextSlide();
  });

  // Initialize
  updateCarousel();

  // Optional: Auto-play
  let autoplayInterval;
  function startAutoplay() {
    autoplayInterval = setInterval(() => {
      if (currentIndex >= maxIndex) {
        currentIndex = 0;
      } else {
        currentIndex++;
      }
      updateCarousel();
    }, 5000);
  }

  function stopAutoplay() {
    clearInterval(autoplayInterval);
  }

  // Start autoplay
  startAutoplay();

  // Pause on hover
  wrapper.addEventListener('mouseenter', stopAutoplay);
  wrapper.addEventListener('mouseleave', startAutoplay);

  // Pause on button click
  prevBtn.addEventListener('click', stopAutoplay);
  nextBtn.addEventListener('click', stopAutoplay);
});
</script>
